# 概览

* 技术栈：React + TypeScript + React Router v6 + Supabase JS

* 交互目标：编辑房源、模拟支付闭环、路由保护、强制条款确认、房东投诉可见

* 产出：核心组件与服务层代码，Hooks 实现，路由集成示例

# 服务层

## Supabase 客户端

```ts
// src/services/supabaseClient.ts
import { createClient } from '@supabase/supabase-js'

const supabaseUrl = import.meta.env.VITE_SUPABASE_URL as string
const supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY as string

export const supabase = createClient(supabaseUrl, supabaseAnonKey)
```

## 用户服务

```ts
// src/services/userService.ts
import { supabase } from './supabaseClient'

export const userService = {
  async getProfile(id: string) {
    const { data, error } = await supabase.from('users').select('*').eq('id', id).single()
    if (error) return null
    return data
  },
  async acceptTerms(id: string) {
    const { error } = await supabase.from('users').update({ terms_accepted_at: new Date().toISOString() }).eq('id', id)
    return !error
  },
}
```

## 房源服务

```ts
// src/services/propertyService.ts
import { supabase } from './supabaseClient'

const BUCKET = 'property-images'

export const propertyService = {
  async getById(id: string) {
    const { data, error } = await supabase.from('properties').select('*').eq('id', id).single()
    if (error) return null
    const { data: imgs } = await supabase.from('property_images').select('url').eq('property_id', id)
    const images = imgs?.map(i => i.url) || []
    return { ...data, images }
  },
  async updateProperty(id: string, payload: any) {
    const { error } = await supabase.from('properties').update(payload).eq('id', id)
    return !error
  },
  async deleteImageByUrl(propertyId: string, url: string) {
    const { error } = await supabase.from('property_images').delete().eq('property_id', propertyId).eq('url', url)
    return !error
  },
  async uploadImage(file: File) {
    const path = `${crypto.randomUUID()}-${file.name}`
    const { error } = await supabase.storage.from(BUCKET).upload(path, file, { upsert: false })
    if (error) return null
    const { data } = supabase.storage.from(BUCKET).getPublicUrl(path)
    return data.publicUrl
  },
  async insertImage(propertyId: string, url: string) {
    const { error } = await supabase.from('property_images').insert({ property_id: propertyId, url })
    return !error
  },
}
```

## 申请与支付服务

```ts
// src/services/applicationService.ts
import { supabase } from './supabaseClient'

export const applicationService = {
  async updateStatus(id: string, status: string) {
    const { error } = await supabase.from('applications').update({ status }).eq('id', id)
    return !error
  },
  async getById(id: string) {
    const { data, error } = await supabase.from('applications').select('*').eq('id', id).single()
    if (error) return null
    return data
  },
}
```

```ts
// src/services/paymentService.ts
import { supabase } from './supabaseClient'

export const paymentService = {
  async create(application_id: string, payer_id: string, amount: number, currency: string = 'MYR') {
    const { error } = await supabase.from('payments').insert({ application_id, payer_id, amount, currency })
    return !error
  },
}
```

## 投诉服务

```ts
// src/services/complaintService.ts
import { supabase } from './supabaseClient'

export const complaintService = {
  async listHostComplaints() {
    const { data, error } = await supabase.from('complaints').select('*').eq('target_type', 'property').order('created_at', { ascending: false })
    if (error) return []
    return data
  },
}
```

# 类型

```ts
// src/types.ts
export type Role = 'student' | 'landlord' | 'agent' | 'admin'

export interface User { id: string; role: Role; terms_accepted_at: string | null }
export interface Application { id: string; property_id: string; applicant_id: string; status: 'pending'|'accepted'|'rejected'|'awaiting_payment'|'completed'|'cancelled'; amount?: number }
```

# Hooks

## 认证上下文

```ts
// src/hooks/useAuth.tsx
import { createContext, useContext, useEffect, useState } from 'react'
import { supabase } from '../services/supabaseClient'
import { User } from '../types'

type AuthContextValue = { user: User | null; loading: boolean }
const AuthContext = createContext<AuthContextValue>({ user: null, loading: true })

export function AuthProvider({ children }: { children: React.ReactNode }) {
  const [user, setUser] = useState<User | null>(null)
  const [loading, setLoading] = useState(true)
  useEffect(() => {
    let mounted = true
    async function load() {
      const { data: { user: authUser } } = await supabase.auth.getUser()
      if (!authUser) { if (mounted) setUser(null); setLoading(false); return }
      const { data, error } = await supabase.from('users').select('*').eq('id', authUser.id).single()
      if (!error && mounted) setUser(data as User)
      setLoading(false)
    }
    load()
    const { data: subscription } = supabase.auth.onAuthStateChange(() => load())
    return () => { subscription?.subscription.unsubscribe(); mounted = false }
  }, [])
  return <AuthContext.Provider value={{ user, loading }}>{children}</AuthContext.Provider>
}

export function useAuth() { return useContext(AuthContext) }
```

## 编辑房源 Hook

```ts
// src/hooks/useEditProperty.ts
import { useState, useMemo } from 'react'
import { propertyService } from '../services/propertyService'

type FormState = { title: string; description: string; price: number }

export function useEditProperty(property: { id: string; title: string; description: string; price: number; images: string[] } | null) {
  const [form, setForm] = useState<FormState>({ title: '', description: '', price: 0 })
  const [originalImages, setOriginalImages] = useState<string[]>([])
  const [deletedUrls, setDeletedUrls] = useState<string[]>([])
  const [newFiles, setNewFiles] = useState<File[]>([])
  const [saving, setSaving] = useState(false)

  const canSubmit = useMemo(() => property !== null, [property])

  function init() {
    if (!property) return
    setForm({ title: property.title, description: property.description, price: property.price })
    setOriginalImages(property.images)
    setDeletedUrls([])
    setNewFiles([])
  }

  function toggleDelete(url: string) {
    setDeletedUrls(prev => prev.includes(url) ? prev.filter(u => u !== url) : [...prev, url])
  }

  function addFiles(files: FileList) {
    setNewFiles(prev => [...prev, ...Array.from(files)])
  }

  function removeNewFile(index: number) {
    setNewFiles(prev => prev.filter((_, i) => i !== index))
  }

  async function submit() {
    if (!property) return false
    setSaving(true)
    const okUpdate = await propertyService.updateProperty(property.id, { title: form.title, description: form.description, price: form.price })
    if (!okUpdate) { setSaving(false); return false }
    for (const url of deletedUrls) {
      await propertyService.deleteImageByUrl(property.id, url)
    }
    for (const file of newFiles) {
      const url = await propertyService.uploadImage(file)
      if (url) await propertyService.insertImage(property.id, url)
    }
    setSaving(false)
    return true
  }

  return { form, setForm, originalImages, deletedUrls, newFiles, toggleDelete, addFiles, removeNewFile, init, submit, saving, canSubmit }
}
```

# 组件

## 路由保护组件

```ts
// src/components/ProtectedRoute.tsx
import { ReactNode } from 'react'
import { Navigate, useLocation } from 'react-router-dom'
import { useAuth } from '../hooks/useAuth'
import { Role } from '../types'

type Props = { allowedRoles?: Role[]; children: ReactNode }

export default function ProtectedRoute({ allowedRoles, children }: Props) {
  const { user, loading } = useAuth()
  const location = useLocation()
  if (loading) return null
  if (!user) return <Navigate to="/login" replace state={{ from: location }} />
  if (allowedRoles && !allowedRoles.includes(user.role)) return <Navigate to="/" replace />
  return <>{children}</>
}
```

## 条款拦截组件

```ts
// src/components/TermsGuard.tsx
import React, { useEffect } from 'react';
import { useNavigate, useLocation } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';

interface TermsGuardProps {
  children: React.ReactNode;
}

const TermsGuard: React.FC<TermsGuardProps> = ({ children }) => {
  const { user, loading } = useAuth();
  const navigate = useNavigate();
  const location = useLocation();

  useEffect(() => {
    if (loading) return;

    // 1. 如果已经在条款页，或者是登录/注册页，不拦截
    // 防止死循环的关键判断
    if (['/terms-agreement', '/login', '/register'].includes(location.pathname)) {
      return;
    }

    // 2. 检查用户是否登录，且是否未同意条款
    // 假设 user.terms_accepted_at 为空字符串或 null 代表未同意
    if (user && !user.terms_accepted_at) {
      // 强制跳转到条款页，并替换当前历史记录（防止用户点浏览器后退返回）
      navigate('/terms-agreement', { replace: true });
    }
  }, [user, loading, location, navigate]);

  // 如果正在加载或不满足拦截条件，正常渲染子组件
  return <>{children}</>;
};

export default TermsGuard;
```

## 条款同意页面

```ts
// src/pages/TermsAgreementPage.tsx
import { useNavigate, useLocation } from 'react-router-dom'
import { useAuth } from '../hooks/useAuth'
import { userService } from '../services/userService'
import { useState } from 'react'

export default function TermsAgreementPage() {
  const { user } = useAuth()
  const navigate = useNavigate()
  const location = useLocation()
  const [saving, setSaving] = useState(false)
  async function agree() {
    if (!user) return
    setSaving(true)
    const ok = await userService.acceptTerms(user.id)
    setSaving(false)
    if (ok) navigate((location.state as any)?.from || '/', { replace: true })
  }
  return (
    <div>
      <h1>Terms & Policy</h1>
      <p>请阅读并同意条款后继续使用。</p>
      <button onClick={agree} disabled={saving}>I Agree</button>
    </div>
  )
}
```

## 编辑房源页面

```ts
// src/pages/EditPropertyPage.tsx
import { useEffect } from 'react'
import { useParams } from 'react-router-dom'
import { propertyService } from '../services/propertyService'
import { useState } from 'react'
import { useEditProperty } from '../hooks/useEditProperty'

export default function EditPropertyPage() {
  const { id } = useParams<{ id: string }>()
  const [property, setProperty] = useState<any>(null)
  const hook = useEditProperty(property)

  useEffect(() => {
    let mounted = true
    async function load() {
      if (!id) return
      const p = await propertyService.getById(id)
      if (mounted) { setProperty(p) }
    }
    load()
    return () => { mounted = false }
  }, [id])

  useEffect(() => { hook.init() }, [property])

  if (!property) return null

  return (
    <div>
      <h1>编辑房源</h1>
      <input value={hook.form.title} onChange={e => hook.setForm(s => ({ ...s, title: e.target.value }))} />
      <textarea value={hook.form.description} onChange={e => hook.setForm(s => ({ ...s, description: e.target.value }))} />
      <input type="number" value={hook.form.price} onChange={e => hook.setForm(s => ({ ...s, price: Number(e.target.value) }))} />
      <div>
        {hook.originalImages.map(url => (
          <div key={url}>
            <img src={url} alt="" />
            <button onClick={() => hook.toggleDelete(url)}>
              {hook.deletedUrls.includes(url) ? '撤销删除' : '删除'}
            </button>
          </div>
        ))}
      </div>
      <input type="file" multiple onChange={e => hook.addFiles(e.target.files!)} />
      <ul>
        {hook.newFiles.map((f, i) => (
          <li key={i}>
            {f.name}
            <button onClick={() => hook.removeNewFile(i)}>移除</button>
          </li>
        ))}
      </ul>
      <button disabled={!hook.canSubmit || hook.saving} onClick={hook.submit}>保存</button>
    </div>
  )
}
```

## 支付模态框

```ts
// src/components/PaymentModal.tsx
import { useState } from 'react'
import { paymentService } from '../services/paymentService'
import { applicationService } from '../services/applicationService'
import { useAuth } from '../hooks/useAuth'

type Props = { open: boolean; applicationId: string; amount: number; onClose: () => void }

export default function PaymentModal({ open, applicationId, amount, onClose }: Props) {
  const [loading, setLoading] = useState(false)
  const { user } = useAuth()
  if (!open) return null
  async function confirm() {
    if (!user) return
    setLoading(true)
    const ok = await paymentService.create(applicationId, user.id, amount)
    if (ok) await applicationService.updateStatus(applicationId, 'completed')
    setLoading(false)
    onClose()
  }
  return (
    <div>
      <div>
        <h2>支付</h2>
        <p>金额 {amount}</p>
        <button onClick={confirm} disabled={loading}>确认支付</button>
        <button onClick={onClose} disabled={loading}>取消</button>
      </div>
    </div>
  )
}
```

## 投诉列表

```ts
// src/components/ComplaintsList.tsx
import { useEffect, useState } from 'react'
import { complaintService } from '../services/complaintService'
import { supabase } from '../services/supabaseClient'

type Complaint = { id: string; target_id: string; category: string; description: string }

export default function ComplaintsList() {
  const [items, setItems] = useState<Complaint[]>([])
  const [titles, setTitles] = useState<Record<string, string>>({})
  useEffect(() => {
    let mounted = true
    async function load() {
      const cs = await complaintService.listHostComplaints()
      if (!mounted) return
      setItems(cs)
      const ids = Array.from(new Set(cs.map(x => x.target_id)))
      if (ids.length) {
        const { data } = await supabase.from('properties').select('id,title').in('id', ids)
        const map = Object.fromEntries((data || []).map((p: any) => [p.id, p.title]))
        setTitles(map)
      }
    }
    load()
    return () => { mounted = false }
  }, [])
  return (
    <div>
      {items.map(c => (
        <div key={c.id}>
          <div>{titles[c.target_id] || c.target_id}</div>
          <div>{c.category}</div>
          <div>{c.description}</div>
        </div>
      ))}
    </div>
  )
}
```

# 路由集成示例

```tsx
// src/App.tsx 片段
import { Routes, Route } from 'react-router-dom'
import { AuthProvider } from './hooks/useAuth'
import TermsGuard from './components/TermsGuard'
import ProtectedRoute from './components/ProtectedRoute'
import TermsAgreementPage from './pages/TermsAgreementPage'
import EditPropertyPage from './pages/EditPropertyPage'
import ComplaintsList from './components/ComplaintsList'

export default function App() {
  return (
    <AuthProvider>
      <TermsGuard>
        <Routes>
          <Route path="/terms-agreement" element={<TermsAgreementPage />} />
          <Route path="/host-dashboard" element={<ProtectedRoute allowedRoles={['landlord','agent']}><ComplaintsList /></ProtectedRoute>} />
          <Route path="/properties/:id/edit" element={<ProtectedRoute allowedRoles={['landlord','agent']}><EditPropertyPage /></ProtectedRoute>} />
        </Routes>
      </TermsGuard>
    </AuthProvider>
  )
}
```

<br />

#### 实现“强制滚动阅读”的条款页 (`src/pages/TermsAgreement.tsx`)

**修改说明**：

* **UI 设计**：顶部是警告提示，中间是可滚动的内容区域，底部是默认隐藏/禁用的确认框。
* **交互逻辑**：监听 `onScroll` 事件。只有当用户滚动到底部（误差 10px 内）时，确认按钮才会解锁/出现。
* **状态同步**：点击同意后，调用 `refreshProfile`（需在 AuthContext 中实现）刷新本地用户信息，确保跳转后不再被 Guard 拦截。

```
// src/pages/TermsAgreement.tsx
import React, { useState, useRef, UIEvent } from 'react';
import { useNavigate } from 'react-router-dom';
import { useAuth } from '../context/AuthContext';
import { supabase } from '../lib/supabase';

export const TermsAgreementPage: React.FC = () => {
    const { user, refreshProfile } = useAuth(); // 确保你的 AuthContext 提供了 refreshProfile
    const navigate = useNavigate();
    const [canAgree, setCanAgree] = useState(false);
    const [agreed, setAgreed] = useState(false);
    const [submitting, setSubmitting] = useState(false);
    
    // 滚动容器的引用
    const contentRef = useRef<HTMLDivElement>(null);

    // 监听滚动事件
    const handleScroll = (e: UIEvent<HTMLDivElement>) => {
        const { scrollTop, scrollHeight, clientHeight } = e.currentTarget;
        // 判断是否滚动到底部 (容差 5px)
        if (scrollHeight - scrollTop - clientHeight < 5) {
            setCanAgree(true);
        }
    };

    const handleConfirm = async () => {
        if (!user || !agreed) return;
        setSubmitting(true);

        try {
            // 1. 更新数据库状态
            const { error } = await supabase
                .from('users')
                .update({ terms_accepted_at: new Date().toISOString() })
                .eq('id', user.id);

            if (error) throw error;

            // 2. 关键：刷新本地用户状态，否则 TermsGuard 还会拦截你
            if (refreshProfile) {
                await refreshProfile();
            }

            // 3. 跳转回首页
            navigate('/', { replace: true });
        } catch (err) {
            alert('Failed to update terms status. Please try again.');
            console.error(err);
        } finally {
            setSubmitting(false);
        }
    };

    return (
        <div style={{
            position: 'fixed', inset: 0, backgroundColor: 'rgba(0,0,0,0.8)',
            display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 9999
        }}>
            <div style={{
                width: '90%', maxWidth: '600px', backgroundColor: '#fff',
                borderRadius: '8px', overflow: 'hidden', display: 'flex', flexDirection: 'column',
                maxHeight: '80vh', boxShadow: '0 4px 20px rgba(0,0,0,0.3)'
            }}>
                {/* 顶部警告提示 */}
                <div style={{ padding: '20px', backgroundColor: '#fff3cd', borderBottom: '1px solid #ffeeba' }}>
                    <h2 style={{ margin: 0, fontSize: '1.2rem', color: '#856404', display: 'flex', alignItems: 'center', gap: '10px' }}>
                        ⚠️ Important Action Required
                    </h2>
                    <p style={{ margin: '10px 0 0', fontSize: '0.9rem', color: '#856404' }}>
                        Please review and accept our updated Terms of Service and Privacy Policy to continue using the platform.
                        <br/><strong>Scroll to the bottom to confirm.</strong>
                    </p>
                </div>

                {/* 可滚动正文区域 */}
                <div 
                    ref={contentRef}
                    onScroll={handleScroll}
                    style={{ 
                        padding: '25px', 
                        overflowY: 'auto', 
                        flex: 1,
                        lineHeight: '1.6',
                        backgroundColor: '#fafafa'
                    }}
                >
                    <h3>1. Introduction</h3>
                    <p>Welcome to our rental platform...</p>
                    <p>(在此处填充大量占位文本，以测试滚动效果)</p>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
                    <div style={{ height: '600px' }}></div> {/* 强制占位高度 */}
                    <h3>99. Final Agreement</h3>
                    <p>By clicking "I Agree", you acknowledge that you have read and understood all the terms listed above.</p>
                </div>

                {/* 底部确认框 (仅当 canAgree 为 true 时显示或激活) */}
                <div style={{ 
                    padding: '20px', 
                    borderTop: '1px solid #eee', 
                    backgroundColor: '#fff',
                    opacity: canAgree ? 1 : 0.5,
                    pointerEvents: canAgree ? 'auto' : 'none',
                    transition: 'opacity 0.3s'
                }}>
                    <label style={{ display: 'flex', alignItems: 'center', gap: '10px', cursor: 'pointer', marginBottom: '15px' }}>
                        <input 
                            type=\"checkbox\" 
                            checked={agreed} 
                            onChange={(e) => setAgreed(e.target.checked)} 
                            style={{ width: '18px', height: '18px' }}
                        />
                        <span style={{ fontWeight: 500 }}>I have read and agree to the Terms & Policy</span>
                    </label>

                    <button 
                        onClick={handleConfirm}
                        disabled={!agreed || submitting}
                        className=\"btn btn-primary\"
                        style={{ 
                            width: '100%', 
                            padding: '12px', 
                            backgroundColor: agreed ? '#007bff' : '#ccc',
                            border: 'none',
                            borderRadius: '4px',
                            color: '#fff',
                            fontWeight: 'bold',
                            cursor: agreed ? 'pointer' : 'not-allowed'
                        }}
                    >
                        {submitting ? 'Processing...' : 'Confirm & Continue'}
                    </button>
                    
                    {!canAgree && (
                        <div style={{ textAlign: 'center', fontSize: '12px', color: '#999', marginTop: '10px' }}>
                            ↓ Please scroll to the end to enable confirmation
                        </div>
                    )}
                </div>
            </div>
        </div>
    );
};
```

<br />

. 支付逻辑原子化 (`src/services/paymentService.ts`)

```
// src/services/paymentService.ts
import { supabase } from '../lib/supabase';

export const PaymentService = {
    /**
     * 执行支付并自动完成订单（原子操作）
     */
    async processPayment(applicationId: string, payerId: string, amount: number) {
        // 调用 Supabase RPC 函数
        const { error } = await supabase.rpc('complete_payment', {
            p_application_id: applicationId,
            p_payer_id: payerId,
            p_amount: amount
        });

        if (error) {
            console.error('Payment failed:', error);
            throw new Error(error.message || 'Payment transaction failed');
        }

        return true;
    }
};
```

<br />

#### 支付弹窗调用 (`src/components/Payment/PaymentModal.tsx`)

**修改说明**：

* UI 展示金额和“支付中”状态。
* 调用 `PaymentService.processPayment`。

```
import React, { useState } from 'react';
import { PaymentService } from '../../services/paymentService';

interface PaymentModalProps {
    isOpen: boolean;
    onClose: () => void;
    onSuccess: () => void;
    applicationId: string;
    payerId: string;
    amount: number;
}

export const PaymentModal: React.FC<PaymentModalProps> = ({ 
    isOpen, onClose, onSuccess, applicationId, payerId, amount 
}) => {
    const [loading, setLoading] = useState(false);

    if (!isOpen) return null;

    const handlePay = async () => {
        setLoading(true);
        try {
            await PaymentService.processPayment(applicationId, payerId, amount);
            alert('Payment Successful!');
            onSuccess(); // 刷新列表或关闭弹窗
            onClose();
        } catch (error) {
            alert('Payment failed. Please try again.');
        } finally {
            setLoading(false);
        }
    };

    return (
        <div style={{
            position: 'fixed', inset: 0, background: 'rgba(0,0,0,0.5)', 
            display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 1000 
        }}>
            <div style={{ background: 'white', padding: '30px', borderRadius: '10px', minWidth: '300px' }}>
                <h3>Confirm Payment</h3>
                <p>You are about to pay deposit for this rental.</p>
                <div style={{ fontSize: '24px', fontWeight: 'bold', margin: '20px 0', color: '#2e7d32' }}>
                    RM {amount}
                </div>
                
                <div style={{ display: 'flex', gap: '10px', marginTop: '20px' }}>
                    <button onClick={onClose} disabled={loading} style={{ flex: 1, padding: '10px' }}>
                        Cancel
                    </button>
                    <button 
                        onClick={handlePay} 
                        disabled={loading}
                        style={{ flex: 1, padding: '10px', background: '#007bff', color: 'white', border: 'none', borderRadius: '4px' }}
                    >
                        {loading ? 'Processing...' : 'Pay Now'}
                    </button>
                </div>
            </div>
        </div>
    );
};
```

<br />

### 如何在 AuthContext 中添加 `refreshProfile`

为了让条款页点击同意后生效，你需要确保 `useAuth` 暴露了这个方法。

**请检查** **`src/context/AuthContext.tsx`，添加如下逻辑：**

```
// 在 AuthContext 的 value 中暴露 fetchProfile
const fetchProfile = async (userId: string) => {
    // ... 原有的获取 profile 逻辑 ...
    const { data } = await supabase.from('users').select('*').eq('id', userId).single();
    if (data) setUser(data); // 更新 state
};

// 确保 Context Provider 传递了这个函数
return (
    <AuthContext.Provider value={{ user, loading, login, register, logout, refreshProfile: () => user && fetchProfile(user.id) }}>
        {children}
    </AuthContext.Provider>
);
```

# 交互与状态

*  在detail房源页面，上传房源的用户（landlord或agent）点击edit支持原图标记删除与新图批量添加，提交后串行执行删除与插入

* 在登录或者注册后，必须要阅读TermsAgreement.tsx条款页并同意才能访问页面。

* Applications 显示 Pay Now，当状态为 accepted 或 awaiting\_payment，弹出 PaymentModal 完成闭环

* ProtectedRoute 在未登录或角色不符时进行导航拦截

* TermsGuard 在登录后检查条款时间并进行跳转拦截

* ComplaintsList 依赖 RLS 自动筛选，仅展示房东相关投诉并显示房源标题

# 验证点

* RLS 已覆盖插入与删除权限，前端仅需按数据闭环控制

* 金额来源于申请记录的房屋id对应的价格字段

* 需配置存储桶名称与公开访问策略以生成图片 URL

请确认是否按此方案落地实现，确认后我将开始应用到代码库并进行联调与页面接入。
